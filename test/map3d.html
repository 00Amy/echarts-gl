<!Doctype html>
<html>
    <head>    
    <script src="http://s1.bdstatic.com/r/www/cache/ecom/esl/1-8-8/esl.js"></script>
    <meta charset="utf-8">
    <style>
        html, body, #main {
            height: 100%;
        }
        body {
            margin: 0px;
            background: -webkit-linear-gradient(#22466F, #452525);
            background: -o-linear-gradient(#22466F, #452525);
            background: linear-gradient(#22466F, #452525);
        }
    </style>
    </head>
    <body>
        <div id="main"></div>
        <script>
            require.config({
                packages: [{
                    name: 'echarts-x',
                    location: '../src',
                    main: 'echarts-x'
                }, {
                    name: 'echarts',
                    location: '../../echarts/src',
                    main: 'echarts'
                }, {
                    name: 'zrender',
                    location: '../../zrender/src',
                    main: 'zrender'
                }, {
                    name: 'qtek',
                    location: '../../qtek/src',
                    main: 'qtek.amd'
                }]
            });

            require([
                'echarts',
                'qtek/core/request',
                'echarts/component/dataRange',
                'echarts-x',
                'echarts-x/chart/map3d'
            ], function (echarts, request) {

                var chart = echarts.init(document.getElementById('main'));

                request.get({
                    url: '../doc/example/data/population.json',
                    onload: function (data) {
                        data = JSON.parse(data);
                        var max = -Infinity;
                        var min = Infinity;
                        data = data.map(function (dataItem) {
                            max = Math.max(dataItem[2], max);
                            min = Math.min(dataItem[2], min);
                            return {
                                geoCoord: dataItem.slice(0, 2),
                                value: dataItem[2],
                                distance: Math.random()
                            }
                        });
                        data.forEach(function (dataItem) {
                            // Map symbol size to 2 - 20
                            dataItem.symbolSize = (dataItem.value - min) / (max - min) * 18 + 2;
                        });
                        chart.setOption({
                            title : {
                                text: 'Gridded Population of the World (2000)',
                                subtext: 'from Socioeconomic Data and Applications Center',
                                sublink : 'http://sedac.ciesin.columbia.edu/data/set/gpw-v3-population-density/data-download#close',
                                x:'center',
                                y:'top',
                                textStyle: {
                                    color: 'white'
                                }
                            },
                            dataRange: {
                                min: 0,
                                max: max,
                                text:['High','Low'],
                                realtime: false,
                                calculable : true,
                                color: ['red','yellow','lightskyblue']
                            },
                            series: [{
                                name: 'World Population',
                                type: 'map3d',
                                mapType: 'world',
                                mapBackgroundColor: '#005f99',
                                itemStyle: {
                                    normal: {
                                        borderColor: '#777'
                                    }
                                },
                                markPoint: {
                                    large: true,
                                    effect: {
                                        show: true,
                                        shadowBlur: 0.4
                                    },
                                    data: data
                                },
                                autoRotate: true,
                            }]
                        });
                    }
                })
            });
        </script>
    </body>
</html>