<!Doctype html>
<html>
    <head>    
    <script src="http://s1.bdstatic.com/r/www/cache/ecom/esl/1-8-8/esl.js"></script>
    <meta charset="utf-8">
    <style>
        html, body, #main {
            height: 100%;
        }
        body {
            margin: 0px;
            background: -webkit-linear-gradient(#22466F, #452525);
            background: -o-linear-gradient(#22466F, #452525);
            background: linear-gradient(#22466F, #452525);
        }
    </style>
    </head>
    <body>
        <div id="main"></div>
        <script>
            require.config({
                packages: [{
                    name: 'echarts-x',
                    location: '../src',
                    main: 'echarts-x'
                }, {
                    name: 'echarts',
                    location: '../../echarts/src',
                    main: 'echarts'
                }, {
                    name: 'zrender',
                    location: '../../zrender/src',
                    main: 'zrender'
                }, {
                    name: 'qtek',
                    location: '../../qtek/src',
                    main: 'qtek.amd'
                }]
            });

            require([
                'echarts',
                'qtek/core/request',
                'echarts/component/dataRange',
                'echarts-x',
                'echarts-x/chart/map3d'
            ], function (echarts, request) {

                var chart = echarts.init(document.getElementById('main'));

                request.get({
                    url: '../doc/example/data/population.json',
                    onload: function (data) {
                        data = JSON.parse(data);
                        var max = -Infinity;
                        data = data.map(function (item) {
                            max = Math.max(item[2], max);
                            return {
                                geoCoord: item.slice(0, 2),
                                value: item[2]
                            }
                        });
                        data.forEach(function (item) {
                            item.barHeight = item.value / max * 50 + 0.1
                        });

                        chart.setOption({
                            title : {
                                text: 'World Population (2000)',
                                subtext: 'from United Nations, Total population, both sexes combined, as of 1 July (thousands)',
                                sublink : 'http://sedac.ciesin.columbia.edu/data/set/gpw-v3-population-density/data-download#close',
                                x:'center',
                                y:'top',
                                textStyle: {
                                    color: 'white'
                                }
                            },
                            tooltip: {
                                formatter: '{b}'
                            },
                            dataRange: {
                                min: 0,
                                max: max,
                                text:['High','Low'],
                                realtime: false,
                                calculable : true,
                                color: ['red','yellow','lightskyblue']
                            },
                            series: [{
                                type: 'map3d',
                                mapType: 'world',
                                mapBackgroundColor: 'rgba(0, 150, 200, 0.5)',
                                data: [{}],
                                itemStyle: {
                                    normal: {
                                        areaStyle: {
                                            color: 'rgba(0, 150, 200, 0.8)'
                                        },
                                        borderColor: '#777'
                                    }
                                },
                                markBar: {
                                    barSize: 0.6,
                                    data: data
                                },
                                autoRotate: true,
                            }]
                        });
                    }
                });
            });
        </script>
    </body>
</html>